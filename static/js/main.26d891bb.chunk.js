(this["webpackJsonpfull-distortion"]=this["webpackJsonpfull-distortion"]||[]).push([[0],{33:function(e,t,i){},35:function(e,t,i){},46:function(e,t,i){"use strict";i.r(t);var n=i(2),s=i(3),r=i.n(s),a=i(9),o=i.n(a),c=(i(33),i(8)),u=i(14),l=i(13),m=i(5),h=i(10),d=i(4),p=i(7),v=i(6),f=i(0),g=(i(34),i.p+"static/media/img2.90722986.jpg"),b=i.p+"static/media/img1.88e9a5cc.jpg",j=i.p+"static/media/img3.53b2b0cd.jpg",x=i(15),y=function(e){Object(p.a)(i,e);var t=Object(v.a)(i);function i(e){var n;return Object(m.a)(this,i),(n=t.call(this,e)).setupResize=function(){window.addEventListener("resize",n.resize)},n.resize=function(){var e,t;n.width=n.container.offsetWidth,n.height=n.container.offsetHeight,n.renderer.setSize(n.width,n.height),n.camera.aspect=n.width/n.height,console.log("resize"),n.imageAspect=853/1280,n.height/n.width>n.imageAspect?(e=n.width/n.height*n.imageAspect,t=1):(e=1,t=n.height/n.width/n.imageAspect),n.material.uniforms.resolution.value.x=n.width,n.material.uniforms.resolution.value.y=n.height,n.material.uniforms.resolution.value.z=e,n.material.uniforms.resolution.value.w=t;var i=n.camera.position.z;n.camera.fov=180/Math.PI*2*Math.atan(1/(2*i)),n.width/n.height>1?n.plane.scale.x=n.camera.aspect:n.plane.scale.y=1/n.camera.aspect,n.camera.updateProjectionMatrix(),console.log(n.camera)},n.state={textures:[],current:0},n.start=n.start.bind(Object(d.a)(n)),n.stop=n.stop.bind(Object(d.a)(n)),n.animate=n.animate.bind(Object(d.a)(n)),n}return Object(h.a)(i,[{key:"componentDidMount",value:function(){this.scene=new f.h,this.renderer=new f.p,this.width=this.mount.clientWidth,this.height=this.mount.clientHeight,this.renderer.setClearColor(0,1),this.renderer.setSize(this.width,this.height),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=f.q,this.textures=[(new f.l).load(b),(new f.l).load(g),(new f.l).load(j)],this.container=document.getElementById("scene"),this.mount.appendChild(this.renderer.domElement),this.camera=new f.e(75,this.width/this.height,.1,1e3),this.current=0,this.camera.position.set(0,0,4),this.mouse=new f.m,this.prevsmouse=new f.m,this.time=0,this.targetSpeed=0,this.setupResize(),this.addObjects(),this.resize(),this.mouseEvents(),this.animate(),this.mouseMoveEvent()}},{key:"mouseEvents",value:function(){var e=this;document.addEventListener("click",(function(){e.props.isPushed?(console.log(e.props.isPushed),e.props.setPushed(!1),console.log(e.props.isPushed),e.material.uniforms.direction.value=0,x.a.to(e.material.uniforms.progress,{value:1,duration:.5})):(console.log(e.props.isPushed),e.props.setPushed(!0),console.log(e.props.isPushed),e.material.uniforms.direction.value=1,x.a.to(e.material.uniforms.progress,{value:0,duration:.5}))}))}},{key:"getSpeed",value:function(){this.speed=Math.sqrt(Math.pow(this.prevsmouse.x-this.mouse.x,2)+Math.pow(this.prevsmouse.y-this.mouse.y,2)),this.targetSpeed+=.1*(this.speed-this.targetSpeed),this.prevsmouse.x=this.mouse.x,this.prevsmouse.y=this.mouse.y}},{key:"next",value:function(){var e=this.textures.length,t=this.textures[(this.current+1)%e];console.log(t),console.log("nextTexture"),this.current++,this.material.uniforms.texture.value=t}},{key:"mouseMoveEvent",value:function(){var e=this;document.addEventListener("mousemove",(function(t){e.mouse.x=t.clientX/e.width,e.mouse.y=1-t.clientY/e.height,e.material.uniforms.mouse.value=e.mouse}))}},{key:"addObjects",value:function(){this.material=new f.i({side:f.a,uniforms:{time:{type:"f",value:0},progress:{type:"f",value:0},speed:{type:"f",value:0},mouse:{type:"v2",value:new f.m(0,0)},direction:{type:"f",value:0},texture:{type:"t",value:this.textures[this.props.activeIndex]},resolution:{type:"v4",value:new f.o},uvRate1:{value:new f.m(1,1)}},vertexShader:"\n\nuniform float time;\nuniform float progress;\nuniform float direction;\nvarying vec2 vUv;\nvarying vec4 vPosition;\nuniform vec2 pixels;\n\nvoid main()\t{\n\n    vec3 pos = position;\n\n    //pos.z = 0.1*sin(pos.x * 10.);\n\n    float distance = length(uv - vec2(0.5));\n\n    float maxdist = length(vec2(0.5));\n\n\n    float normalizedDistance = distance / maxdist;\n\n    float stickTo = normalizedDistance;\n    float stickOut = -normalizedDistance;\n\n    float stickEffect = mix(stickTo, stickOut, direction);\n\n    float myProgress = min(2.*progress, 2.*(1. - progress));\n\n    float zOffset = 2.;\n\n    float zProgress = mix(clamp(2. * progress,0.,1.),clamp(1. - 2. * (1. - progress),0.,1.), direction);\n\n    pos.z += zOffset *  (stickEffect * myProgress -zProgress);\n\n    pos.z += progress * sin(distance * 10. + 2. * time)* 0.1;\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n\n}\n",fragmentShader:"\n\nuniform float time;\nuniform float progress;\nuniform float speed;\nuniform vec2 mouse;\nuniform float direction;\nuniform sampler2D texture;\nuniform sampler2D texture2;\nuniform vec4 resolution;\nvarying vec2 vUv;\nvarying vec4 vPosition;\n\n\nvoid main()\t{\n    float normSpeed = clamp(speed*40.,0.,1.);\n    float mouseDist = length(vUv - mouse);\n\n    float c = smoothstep(0.2*normSpeed, 0., mouseDist);\n    vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);\n    vec4 color1 = texture2D(texture, newUV);\n\n    float r = texture2D(texture, newUV + 0.1 * 0.5 * c*normSpeed).r;\n    float g = texture2D(texture, newUV + 0.1 * 0.3 * c*normSpeed).g;\n    float b = texture2D(texture, newUV + 0.1 * 0.1 * c*normSpeed).b;\n\n    gl_FragColor = vec4(vUv, 0.0,1.);\n    gl_FragColor = color1;\n\n    gl_FragColor = vec4(normSpeed * mouseDist,0., 0.,1.);\n    gl_FragColor = vec4(c,0., 0.,1.);\n    gl_FragColor = vec4(r,g, b,1.);\n}\n"}),this.geometry=new f.f(1,1,100,100),this.plane=new f.d(this.geometry,this.material),this.scene.add(this.plane)}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"animate",value:function(){this.time+=.05,this.getSpeed(),this.material.uniforms.texture.value=this.textures[this.props.activeIndex],this.material.uniforms.time.value=this.time,this.material.uniforms.speed.value=this.targetSpeed,this.frameId=requestAnimationFrame(this.animate),this.renderScene()}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{id:"scene",ref:function(t){e.mount=t}})}}]),i}(s.Component),O=i(27),w=i(26),k=i.n(w),S=function(e){Object(p.a)(i,e);var t=Object(v.a)(i);function i(e){var n;return Object(m.a)(this,i),(n=t.call(this,e)).state={active:!0},n}return Object(h.a)(i,[{key:"render",value:function(){var e=this,t=this.state.active,i=this.props,s=i.once,r=i.children,a=Object(O.a)(i,["once","children"]);return Object(n.jsx)(k.a,Object(c.a)(Object(c.a)({active:t,onChange:function(t){s&&t&&e.setState({active:!1},(function(){return console.log("turned the things off")}))}},a),{},{children:function(e){var t=e.isVisible;return r({isVisible:t})}}))}}]),i}(s.Component),P=i(12),z=(i(35),[{title:"Lorem ipsum dolor",description:"Nulla vestibulum orci eu nunc pharetra accumsan. Mauris et nulla tempus, volutpat purus eget, bibendum est."},{title:"Mauris mollis",description:"Malesuada nibh euismod ac. Ut bibendum felis justo, vitae vehicula ex mattis vitae. Quisque vulputate justo varius odio viverra"},{title:"Duis vitae",description:"Morbi pharetra erat nec quam viverra pretium. Nullam in massa et mi condimentum pharetra vitae et risus"}]);var _=function(){var e=r.a.useState(0),t=Object(u.a)(e,2),i=t[0],s=t[1],a=r.a.useState(!1),o=Object(u.a)(a,2),m=o[0],h=o[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"frame",children:[Object(n.jsx)("h1",{className:"frame__title",children:"Click Webgl Shader"}),Object(n.jsx)("div",{className:"frame__links"}),Object(n.jsxs)("div",{className:"frame__nav",children:[Object(n.jsx)("a",{className:"frame__link",href:"https://isengupt.github.io/fiber-website/",children:"Previous"}),Object(n.jsx)("a",{className:"frame__link",href:"#",children:"Resume"}),Object(n.jsx)("a",{className:"frame__link",href:"https://github.com/isengupt/full-distortion",children:"GitHub"})]})]}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(y,{activeIndex:i,isPushed:m,setPushed:h}),Object(n.jsx)(l.Parallax,{pages:3,ref:function(e){return e},children:z.map((function(e,t){return Object(n.jsx)("div",{children:Object(n.jsx)(l.ParallaxLayer,{offset:t,speed:1.2,factor:1,className:"parallax__main",children:Object(n.jsx)(S,{partialVisibility:!0,onChange:function(e){return function(e,t){console.log(e),console.log(t),e&&s(t)}(e,t)},children:function(t){var i=t.isVisible;return Object(n.jsx)(P.Spring,{delay:0,to:{opacity:i?1:0,transform:i?"translateY(0)":"translateY(-100px)"},children:function(t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{style:Object(c.a)({},t),children:e.title}),Object(n.jsx)("p",{style:Object(c.a)({},t),children:e.description})]})}})}})},t)})}))})]})]})},C=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,47)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;i(e),n(e),s(e),r(e),a(e)}))};o.a.render(Object(n.jsx)(_,{}),document.getElementById("root")),C()}},[[46,1,2]]]);
//# sourceMappingURL=main.26d891bb.chunk.js.map